"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

function _react() {
  const data = _interopRequireDefault(require("react"));

  _react = function _react() {
    return data;
  };

  return data;
}

function _fs() {
  const data = require("fs");

  _fs = function _fs() {
    return data;
  };

  return data;
}

var _insertComponent = _interopRequireDefault(require("./sdk/insertComponent"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const debug = require('debug')('umi-build-dev:appendBlockToContainer');

var _default = ({
  entryPath,
  blockFolderName,
  dryRun,
  index
}) => {
  debug('start to update the entry file for block(s) under the path...');
  const oldEntry = (0, _fs().readFileSync)(entryPath, 'utf-8');
  const newEntry = (0, _insertComponent.default)(oldEntry, {
    identifier: blockFolderName,
    relativePath: `./${blockFolderName}`,
    index
  });

  if (!dryRun) {
    (0, _fs().writeFileSync)(entryPath, newEntry);
  }
};

exports.default = _default;